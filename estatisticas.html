// js/estatisticas.js

// Função para renderizar a tabela com os dados dos heróis
function renderTabela(dados) {
  const tbody = document.querySelector('#tabela-estatisticas tbody');
  tbody.innerHTML = '';

  if (!Array.isArray(dados)) {
    console.error('Esperado um array, mas recebeu:', dados);
    tbody.innerHTML = '<tr><td colspan="5">Erro ao carregar dados</td></tr>';
    return;
  }

  dados.forEach(heroi => {
    const tr = document.createElement('tr');

    tr.innerHTML = `
      <td>${heroi.name || '-'}</td>
      <td>${heroi.win_rate !== undefined ? heroi.win_rate + '%' : '-'}</td>
      <td>${heroi.pick_rate !== undefined ? heroi.pick_rate + '%' : '-'}</td>
      <td>${heroi.ban_rate !== undefined ? heroi.ban_rate + '%' : '-'}</td>
      <td>${heroi.matches !== undefined ? heroi.matches : '-'}</td>
    `;
    tbody.appendChild(tr);
  });
}

// Buscar dados da API e montar a tabela
fetch('https://mlbb-stats.ridwaanhall.com/api')
  .then(response => response.json())
  .then(dados => {
    // Descomente a linha abaixo para ver como vem a resposta:
    // console.log(dados);

    // Se a resposta vier como { data: [...] }
    const arrayEstatisticas = Array.isArray(dados) ? dados : dados.data;
    renderTabela(arrayEstatisticas);
  })
  .catch(erro => {
    console.error('Erro ao buscar dados:', erro);
    const tbody = document.querySelector('#tabela-estatisticas tbody');
    tbody.innerHTML = '<tr><td colspan="5">Erro ao carregar dados</td></tr>';
  });
